[variables]
PYTHON_VERSION = "3.12"

[phases.setup]
nixPkgs = ['python312', 'python312Packages.pip', 'python312Packages.setuptools', 'python312Packages.wheel', 'chromium', 'chromedriver']
cmds = ['mkdir -p /usr/local/bin && ln -sf $(which python3) /usr/local/bin/python && ln -sf $(which pip3) /usr/local/bin/pip || true']

[phases.install]
cmds = ['python3 -m venv /opt/venv', '. /opt/venv/bin/activate && pip install --upgrade pip setuptools wheel', '. /opt/venv/bin/activate && pip install -r requirements.txt']

